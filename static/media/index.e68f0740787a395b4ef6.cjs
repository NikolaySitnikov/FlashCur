"use strict";var __defProp=Object.defineProperty,__getOwnPropDesc=Object.getOwnPropertyDescriptor,__getOwnPropNames=Object.getOwnPropertyNames,__hasOwnProp=Object.prototype.hasOwnProperty,__export=(e,r)=>{for(var t in r)__defProp(e,t,{get:r[t],enumerable:!0})},__copyProps=(e,r,t,o)=>{if(r&&"object"===typeof r||"function"===typeof r)for(let n of __getOwnPropNames(r))__hasOwnProp.call(e,n)||n===t||__defProp(e,n,{get:()=>r[n],enumerable:!(o=__getOwnPropDesc(r,n))||o.enumerable});return e},__toCommonJS=e=>__copyProps(__defProp({},"__esModule",{value:!0}),e),index_exports={};__export(index_exports,{createFinalURL:()=>createFinalURL,createPathBasedClient:()=>createPathBasedClient,createQuerySerializer:()=>createQuerySerializer,default:()=>createClient,defaultBodySerializer:()=>defaultBodySerializer,defaultPathSerializer:()=>defaultPathSerializer,mergeHeaders:()=>mergeHeaders,randomID:()=>randomID,removeTrailingSlash:()=>removeTrailingSlash,serializeArrayParam:()=>serializeArrayParam,serializeObjectParam:()=>serializeObjectParam,serializePrimitiveParam:()=>serializePrimitiveParam,wrapAsPathBasedClient:()=>wrapAsPathBasedClient}),module.exports=__toCommonJS(index_exports);var PATH_PARAM_RE=/\{[^{}]+\}/g,supportsRequestInitExt=()=>"object"===typeof process&&Number.parseInt(process?.versions?.node?.substring(0,2))>=18&&process.versions.undici;function randomID(){return Math.random().toString(36).slice(2,11)}function createClient(e){let{baseUrl:r="",Request:t=globalThis.Request,fetch:o=globalThis.fetch,querySerializer:n,bodySerializer:i,headers:s,requestInitExt:a,...l}={...e};a=supportsRequestInitExt()?a:void 0,r=removeTrailingSlash(r);const c=[];async function u(e,u){const{baseUrl:p,fetch:f=o,Request:d=t,headers:h,params:m={},parseAs:y="json",querySerializer:P,bodySerializer:b=i??defaultBodySerializer,body:w,...R}=u||{};let g=r;p&&(g=removeTrailingSlash(p)??r);let E="function"===typeof n?n:createQuerySerializer(n);P&&(E="function"===typeof P?P:createQuerySerializer({..."object"===typeof n?n:{},...P}));const S=void 0===w?void 0:b(w,mergeHeaders(s,h,m.header)),_=mergeHeaders(void 0===S||S instanceof FormData?{}:{"Content-Type":"application/json"},s,h,m.header),z={redirect:"follow",...l,...R,body:S,headers:_};let T,j,v,A=new t(createFinalURL(e,{baseUrl:g,params:m,querySerializer:E}),z);for(const r in R)r in A||(A[r]=R[r]);if(c.length){T=randomID(),j=Object.freeze({baseUrl:g,fetch:f,parseAs:y,querySerializer:E,bodySerializer:b});for(const r of c)if(r&&"object"===typeof r&&"function"===typeof r.onRequest){const o=await r.onRequest({request:A,schemaPath:e,params:m,options:j,id:T});if(o){if(!(o instanceof t)){if(o instanceof Response){v=o;break}throw new Error("onRequest: must return new Request() or Response() when modifying the request")}A=o}}}if(!v){try{v=await f(A,a)}catch(C){let r=C;if(c.length)for(let t=c.length-1;t>=0;t--){const o=c[t];if(o&&"object"===typeof o&&"function"===typeof o.onError){const t=await o.onError({request:A,error:r,schemaPath:e,params:m,options:j,id:T});if(t){if(t instanceof Response){r=void 0,v=t;break}if(t instanceof Error){r=t;continue}throw new Error("onError: must return new Response() or instance of Error")}}}if(r)throw r}if(c.length)for(let r=c.length-1;r>=0;r--){const t=c[r];if(t&&"object"===typeof t&&"function"===typeof t.onResponse){const r=await t.onResponse({request:A,response:v,schemaPath:e,params:m,options:j,id:T});if(r){if(!(r instanceof Response))throw new Error("onResponse: must return new Response() when modifying the response");v=r}}}}if(204===v.status||"HEAD"===A.method||"0"===v.headers.get("Content-Length"))return v.ok?{data:void 0,response:v}:{error:void 0,response:v};if(v.ok)return"stream"===y?{data:v.body,response:v}:{data:await v[y](),response:v};let O=await v.text();try{O=JSON.parse(O)}catch{}return{error:O,response:v}}return{request:(e,r,t)=>u(r,{...t,method:e.toUpperCase()}),GET:(e,r)=>u(e,{...r,method:"GET"}),PUT:(e,r)=>u(e,{...r,method:"PUT"}),POST:(e,r)=>u(e,{...r,method:"POST"}),DELETE:(e,r)=>u(e,{...r,method:"DELETE"}),OPTIONS:(e,r)=>u(e,{...r,method:"OPTIONS"}),HEAD:(e,r)=>u(e,{...r,method:"HEAD"}),PATCH:(e,r)=>u(e,{...r,method:"PATCH"}),TRACE:(e,r)=>u(e,{...r,method:"TRACE"}),use(...e){for(const r of e)if(r){if("object"!==typeof r||!("onRequest"in r||"onResponse"in r||"onError"in r))throw new Error("Middleware must be an object with one of `onRequest()`, `onResponse() or `onError()`");c.push(r)}},eject(...e){for(const r of e){const e=c.indexOf(r);-1!==e&&c.splice(e,1)}}}}var PathCallForwarder=class{constructor(e,r){this.client=e,this.url=r}GET=e=>this.client.GET(this.url,e);PUT=e=>this.client.PUT(this.url,e);POST=e=>this.client.POST(this.url,e);DELETE=e=>this.client.DELETE(this.url,e);OPTIONS=e=>this.client.OPTIONS(this.url,e);HEAD=e=>this.client.HEAD(this.url,e);PATCH=e=>this.client.PATCH(this.url,e);TRACE=e=>this.client.TRACE(this.url,e)},PathClientProxyHandler=class{constructor(){this.client=null}get(e,r){const t=new PathCallForwarder(e,r);return this.client[r]=t,t}};function wrapAsPathBasedClient(e){const r=new PathClientProxyHandler,t=new Proxy(e,r);function o(){}o.prototype=t;const n=new o;return r.client=n,n}function createPathBasedClient(e){return wrapAsPathBasedClient(createClient(e))}function serializePrimitiveParam(e,r,t){if(void 0===r||null===r)return"";if("object"===typeof r)throw new Error("Deeply-nested arrays/objects aren\u2019t supported. Provide your own `querySerializer()` to handle these.");return`${e}=${!0===t?.allowReserved?r:encodeURIComponent(r)}`}function serializeObjectParam(e,r,t){if(!r||"object"!==typeof r)return"";const o=[],n={simple:",",label:".",matrix:";"}[t.style]||"&";if("deepObject"!==t.style&&!1===t.explode){for(const e in r)o.push(e,!0===t.allowReserved?r[e]:encodeURIComponent(r[e]));const n=o.join(",");switch(t.style){case"form":return`${e}=${n}`;case"label":return`.${n}`;case"matrix":return`;${e}=${n}`;default:return n}}for(const s in r){const n="deepObject"===t.style?`${e}[${s}]`:s;o.push(serializePrimitiveParam(n,r[s],t))}const i=o.join(n);return"label"===t.style||"matrix"===t.style?`${n}${i}`:i}function serializeArrayParam(e,r,t){if(!Array.isArray(r))return"";if(!1===t.explode){const o={form:",",spaceDelimited:"%20",pipeDelimited:"|"}[t.style]||",",n=(!0===t.allowReserved?r:r.map(e=>encodeURIComponent(e))).join(o);switch(t.style){case"simple":return n;case"label":return`.${n}`;case"matrix":return`;${e}=${n}`;default:return`${e}=${n}`}}const o={simple:",",label:".",matrix:";"}[t.style]||"&",n=[];for(const i of r)"simple"===t.style||"label"===t.style?n.push(!0===t.allowReserved?i:encodeURIComponent(i)):n.push(serializePrimitiveParam(e,i,t));return"label"===t.style||"matrix"===t.style?`${o}${n.join(o)}`:n.join(o)}function createQuerySerializer(e){return function(r){const t=[];if(r&&"object"===typeof r)for(const o in r){const n=r[o];if(void 0!==n&&null!==n)if(Array.isArray(n)){if(0===n.length)continue;t.push(serializeArrayParam(o,n,{style:"form",explode:!0,...e?.array,allowReserved:e?.allowReserved||!1}))}else"object"!==typeof n?t.push(serializePrimitiveParam(o,n,e)):t.push(serializeObjectParam(o,n,{style:"deepObject",explode:!0,...e?.object,allowReserved:e?.allowReserved||!1}))}return t.join("&")}}function defaultPathSerializer(e,r){let t=e;for(const o of e.match(PATH_PARAM_RE)??[]){let e=o.substring(1,o.length-1),n=!1,i="simple";if(e.endsWith("*")&&(n=!0,e=e.substring(0,e.length-1)),e.startsWith(".")?(i="label",e=e.substring(1)):e.startsWith(";")&&(i="matrix",e=e.substring(1)),!r||void 0===r[e]||null===r[e])continue;const s=r[e];Array.isArray(s)?t=t.replace(o,serializeArrayParam(e,s,{style:i,explode:n})):t="object"!==typeof s?"matrix"!==i?t.replace(o,"label"===i?`.${encodeURIComponent(s)}`:encodeURIComponent(s)):t.replace(o,`;${serializePrimitiveParam(e,s)}`):t.replace(o,serializeObjectParam(e,s,{style:i,explode:n}))}return t}function defaultBodySerializer(e,r){if(e instanceof FormData)return e;if(r){if("application/x-www-form-urlencoded"===(r.get instanceof Function?r.get("Content-Type")??r.get("content-type"):r["Content-Type"]??r["content-type"]))return new URLSearchParams(e).toString()}return JSON.stringify(e)}function createFinalURL(e,r){let t=`${r.baseUrl}${e}`;r.params?.path&&(t=defaultPathSerializer(t,r.params.path));let o=r.querySerializer(r.params.query??{});return o.startsWith("?")&&(o=o.substring(1)),o&&(t+=`?${o}`),t}function mergeHeaders(...e){const r=new Headers;for(const t of e){if(!t||"object"!==typeof t)continue;const e=t instanceof Headers?t.entries():Object.entries(t);for(const[t,o]of e)if(null===o)r.delete(t);else if(Array.isArray(o))for(const e of o)r.append(t,e);else void 0!==o&&r.set(t,o)}return r}function removeTrailingSlash(e){return e.endsWith("/")?e.substring(0,e.length-1):e}